<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>vegaYantra</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #1e88e5;
            --secondary: #0d47a1;
            --accent: #4caf50;
            --warning: #ff9800;
            --danger: #f44336;
            --dark: #121212;
            --dark-card: #1e1e1e;
            --text: #e0e0e0;
            --text-secondary: #9e9e9e;
        }
        
        /* Splash Screen Styles */
        .splash-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #0f3460 0%, #0a0e27 50%, #1a1a2e 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            animation: fadeOut 1s ease-in-out 3s forwards;
        }

        .splash-logo {
            font-size: 4rem;
            font-weight: bold;
            background: linear-gradient(45deg, #00d4ff, #00ff88);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 2rem;
            animation: glow 2s ease-in-out infinite alternate;
        }

        .splash-tagline {
            font-size: 1.2rem;
            color: #b3b3b3;
            margin-bottom: 3rem;
            text-align: center;
        }

        .train-animation-container {
            width: 300px;
            height: 60px;
            position: relative;
            overflow: hidden;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.05);
            margin-bottom: 2rem;
        }

        .animated-train {
            position: absolute;
            left: -60px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 3rem;
            color: #00ff88;
            animation: trainMove 3s ease-in-out infinite;
        }

        .track {
            position: absolute;
            bottom: 15px;
            width: 100%;
            height: 4px;
            background: repeating-linear-gradient(
                90deg,
                #00d4ff 0px,
                #00d4ff 10px,
                transparent 10px,
                transparent 20px
            );
            animation: trackMove 0.5s linear infinite;
        }

        @keyframes trainMove {
            0% { left: -60px; }
            100% { left: 320px; }
        }

        @keyframes trackMove {
            0% { transform: translateX(0); }
            100% { transform: translateX(-20px); }
        }

        @keyframes glow {
            from { text-shadow: 0 0 20px #00d4ff; }
            to { text-shadow: 0 0 30px #00ff88, 0 0 40px #00ff88; }
        }

        @keyframes fadeOut {
            to {
                opacity: 0;
                visibility: hidden;
            }
        }

        /* Loading spinner */
        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 3px solid rgba(0, 212, 255, 0.3);
            border-top: 3px solid #00d4ff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Main App Styles */
        .main-app {
            opacity: 0;
            animation: fadeIn 1s ease-in-out 4s forwards;
        }
        
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            margin:0; 
            background: var(--dark); 
            color: var(--text);
            line-height: 1.6;
        }
        
        header { 
            background: linear-gradient(to right, var(--secondary), var(--primary));
            padding: 15px 20px; 
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 22px;
            font-weight: bold;
        }
        
        .logo i {
            font-size: 28px;
        }
        
        .header-info {
            font-size: 14px;
            background: rgba(255,255,255,0.1);
            padding: 5px 10px;
            border-radius: 4px;
        }
        
        nav { 
            display: flex; 
            background: var(--dark-card);
            overflow-x: auto;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        nav button { 
            flex: 1; 
            padding: 12px; 
            border: none; 
            background: var(--dark-card); 
            color: var(--text); 
            cursor: pointer; 
            font-size: 14px;
            font-weight: 500;
            white-space: nowrap;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: all 0.3s;
        }
        
        nav button:hover { 
            background: rgba(30, 136, 229, 0.1);
        }
        
        nav button.active { 
            background: var(--primary);
            box-shadow: inset 0 -3px 0 rgba(255,255,255,0.5);
        }
        
        section { 
            display: none; 
            padding: 20px; 
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
            box-sizing: border-box;
        }
        
        section.active { 
            display: block; 
            animation: fadeIn 0.5s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        h3 {
            color: var(--primary);
            margin-top: 0;
            border-bottom: 1px solid #333;
            padding-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        table { 
            width: 100%; 
            border-collapse: collapse; 
            margin-top: 15px; 
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            border-radius: 8px;
            overflow: hidden;
        }
        
        th, td { 
            border: 1px solid #333; 
            padding: 12px; 
            text-align: left; 
        }
        
        th { 
            background: var(--secondary);
            font-weight: 600;
        }
        
        tr:nth-child(even) {
            background: rgba(255,255,255,0.03);
        }
        
        tr:hover {
            background: rgba(30, 136, 229, 0.05);
        }
        
        .status-running {
            color: var(--accent);
            font-weight: bold;
        }
        
        .status-waiting {
            color: var(--text-secondary);
        }
        
        .status-departed {
            color: var(--warning);
        }
        
        .train-map-container {
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }
        
        .train-progress-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            background: rgba(30, 136, 229, 0.1);
            padding: 10px 15px;
            border-radius: 6px;
        }
        
        .train-info {
            font-weight: bold;
            font-size: 16px;
        }
        
        .progress-bar {
            height: 8px;
            background: #333;
            border-radius: 4px;
            margin: 20px 0;
            overflow: hidden;
            position: relative;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, var(--accent), var(--primary));
            border-radius: 4px;
            width: 0%;
            transition: width 0.5s;
        }
        
        .stations-container {
            display: flex;
            justify-content: space-between;
            position: relative;
            margin-top: 30px;
        }
        
        .station {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            z-index: 2;
            width: 80px;
        }
        
        .station-dot {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: var(--primary);
            border: 3px solid var(--dark-card);
            box-sizing: border-box;
        }
        
        .station.current .station-dot {
            background: var(--accent);
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.3);
            animation: pulse 1.5s infinite;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(76, 175, 80, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(76, 175, 80, 0); }
            100% { box-shadow: 0 0 0 0 rgba(76, 175, 80, 0); }
        }
        
        .station.passed .station-dot {
            background: var(--accent);
        }
        
        .station-name {
            font-size: 11px;
            text-align: center;
            margin-top: 5px;
            font-weight: 500;
            color: var(--text);
        }
        
        .train-icon {
            position: absolute;
            left: 0;
            top: -8px;
            color: var(--accent);
            font-size: 24px;
            z-index: 3;
            transition: left 1s ease-in-out;
            text-shadow: 0 0 5px rgba(0,0,0,0.5);
        }
        
        .card-container { 
            display: flex; 
            gap: 15px; 
            margin-top: 15px; 
            flex-wrap: wrap; 
        }
        
        .card { 
            flex: 1; 
            background: var(--dark-card); 
            padding: 20px; 
            border-radius: 8px; 
            text-align: center; 
            min-width: 150px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .card h4 {
            margin: 0 0 10px 0;
            color: var(--text-secondary);
            font-size: 14px;
            font-weight: normal;
        }
        
        .card .value {
            font-size: 24px;
            font-weight: bold;
            color: var(--primary);
        }
        
        .card .value.delay {
            color: var(--danger);
        }
        
        .card .value.positive {
            color: var(--accent);
        }
        
        canvas { 
            background: var(--dark-card); 
            border-radius: 8px; 
            margin-top: 15px; 
            padding: 15px;
            box-sizing: border-box;
        }
        
        .route-comparison {
            display: flex;
            gap: 20px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .route-card {
            flex: 1;
            min-width: 300px;
            background: var(--dark-card);
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .route-card h4 {
            margin-top: 0;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .route-card.recommended {
            border: 2px solid var(--accent);
            position: relative;
            overflow: hidden;
        }
        
        .route-card.recommended::before {
            content: 'RECOMMENDED';
            position: absolute;
            top: 0;
            right: 0;
            background: var(--accent);
            color: white;
            font-size: 10px;
            font-weight: bold;
            padding: 3px 10px;
            border-bottom-left-radius: 5px;
        }
        
        .route-stats {
            display: flex;
            gap: 15px;
            margin-top: 15px;
        }
        
        .stat {
            text-align: center;
            flex: 1;
        }
        
        .stat .value {
            font-size: 20px;
            font-weight: bold;
        }
        
        .stat .label {
            font-size: 12px;
            color: var(--text-secondary);
        }
        
        .positive {
            color: var(--accent);
        }
        
        .negative {
            color: var(--danger);
        }
        
        .route-path {
            margin-top: 15px;
            padding: 10px;
            background: rgba(0,0,0,0.2);
            border-radius: 5px;
            font-size: 14px;
        }
        
        .action-buttons {
            margin-top: 20px;
            display: flex;
            gap: 10px;
        }
        
        .btn {
            padding: 10px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: all 0.3s;
        }
        
        .btn-primary {
            background: var(--primary);
            color: white;
        }
        
        .btn-primary:hover {
            background: #1976d2;
        }
        
        .btn-outline {
            background: transparent;
            border: 1px solid var(--primary);
            color: var(--primary);
        }
        
        .btn-outline:hover {
            background: rgba(30, 136, 229, 0.1);
        }
        
        .simulation-controls {
            display: flex;
            gap: 10px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        /* New Features Styles */
        .weather-info {
            display: flex;
            gap: 15px;
            margin: 15px 0;
            flex-wrap: wrap;
        }
        
        .weather-card {
            display: flex;
            align-items: center;
            gap: 10px;
            background: var(--dark-card);
            padding: 10px 15px;
            border-radius: 8px;
            min-width: 180px;
        }
        
        .weather-icon {
            font-size: 24px;
            color: var(--accent);
        }
        
        .weather-details h4 {
            margin: 0;
            font-size: 14px;
            color: var(--text-secondary);
        }
        
        .weather-details .temp {
            font-size: 18px;
            font-weight: bold;
            color: var(--primary);
        }
        
        .passenger-count {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 15px 0;
        }
        
        .count-icon {
            font-size: 24px;
            color: var(--primary);
        }
        
        .count-details h4 {
            margin: 0;
            font-size: 14px;
            color: var(--text-secondary);
        }
        
        .count-details .number {
            font-size: 18px;
            font-weight: bold;
            color: var(--accent);
        }
        
        .notification-bell {
            position: relative;
            cursor: pointer;
        }
        
        .notification-count {
            position: absolute;
            top: -5px;
            right: -5px;
            background: var(--danger);
            color: white;
            font-size: 10px;
            font-weight: bold;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .notifications-panel {
            position: fixed;
            top: 0;
            right: -300px;
            width: 300px;
            height: 100vh;
            background: var(--dark-card);
            box-shadow: -2px 0 10px rgba(0,0,0,0.2);
            z-index: 1000;
            transition: right 0.3s;
            padding: 20px;
            overflow-y: auto;
        }
        
        .notifications-panel.open {
            right: 0;
        }
        
        .notifications-panel h3 {
            margin-top: 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .notification-item {
            padding: 10px;
            margin: 10px 0;
            background: rgba(255,255,255,0.05);
            border-radius: 5px;
            border-left: 3px solid var(--primary);
        }
        
        .notification-item.alert {
            border-left-color: var(--danger);
        }
        
        .notification-item.warning {
            border-left-color: var(--warning);
        }
        
        .speed-gauge {
            width: 150px;
            height: 150px;
            position: relative;
            margin: 20px auto;
        }
        
        .gauge-value {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 24px;
            font-weight: bold;
            color: var(--primary);
        }
        
        .energy-consumption {
            margin: 20px 0;
            display: none;
        }
        
        .consumption-bar {
            height: 20px;
            background: #333;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
            position: relative;
        }
        
        .consumption-fill {
            height: 100%;
            background: linear-gradient(to right, var(--accent), var(--primary));
            border-radius: 10px;
            width: 65%;
            transition: width 0.5s;
        }
        
        .consumption-labels {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: var(--text-secondary);
        }
        
        .time-selector {
            display: flex;
            gap: 10px;
            margin: 15px 0;
        }
        
        .time-btn {
            padding: 8px 12px;
            background: var(--dark-card);
            border: 1px solid #333;
            border-radius: 4px;
            color: var(--text);
            cursor: pointer;
        }
        
        .time-btn.active {
            background: var(--primary);
            border-color: var(--primary);
        }
        
        .platform-view {
            margin: 20px 0;
            padding: 15px;
            background: var(--dark-card);
            border-radius: 8px;
        }
        
        .platform {
            height: 40px;
            background: #333;
            margin: 10px 0;
            border-radius: 4px;
            display: flex;
            align-items: center;
            padding: 0 15px;
            justify-content: space-between;
        }
        
        .platform-number {
            font-weight: bold;
            color: var(--primary);
        }
        
        .platform-status {
            font-size: 12px;
            padding: 3px 8px;
            border-radius: 12px;
            background: rgba(76, 175, 80, 0.2);
            color: var(--accent);
        }
        
        .platform-status.occupied {
            background: rgba(244, 67, 54, 0.2);
            color: var(--danger);
        }
        
        @media (max-width: 768px) {
            .route-comparison {
                flex-direction: column;
            }
            
            .card {
                min-width: 100%;
            }
            
            .station-name {
                font-size: 10px;
            }
            
            nav {
                overflow-x: auto;
            }
            
            nav button {
                font-size: 12px;
                padding: 10px 8px;
            }
            
            .notifications-panel {
                width: 250px;
            }
        }
    </style>
</head>
<body>
    <!-- Splash Screen -->
    <div class="splash-screen" id="splashScreen">
        <div class="splash-logo">VegaYantra</div>
        <div class="splash-tagline">Intelligent Railway Management System</div>
        <div class="train-animation-container">
            <div class="track"></div>
            <div class="animated-train">
                <i class="fas fa-train"></i>
            </div>
        </div>
        <div class="loading-spinner"></div>
    </div>

    <!-- Main Application -->
    <div class="main-app">
        <header>
            <div class="logo">
                <i class="fas fa-train"></i>
                <span>Dashboard</span>
            </div>
            <div class="header-info">
                <span>Chennai Central → Kanyakumari</span>
                <span id="current-time"></span>
            </div>
            <div class="notification-bell" onclick="toggleNotifications()">
                <i class="fas fa-bell"></i>
                <span class="notification-count" id="notification-count">3</span>
            </div>
        </header>
        
        <nav>
            <button class="tab-btn active" onclick="showPage('running')">
                <i class="fas fa-running"></i>
                <span>Train Running Status</span>
            </button>
            <button class="tab-btn" onclick="showPage('schedule')">
                <i class="fas fa-clock"></i>
                <span>Train Schedule</span>
            </button>
            <button class="tab-btn" onclick="showPage('reroute')">
                <i class="fas fa-route"></i>
                <span>Reroute Simulation</span>
            </button>
            <button class="tab-btn" onclick="showPage('analytics')">
                <i class="fas fa-chart-line"></i>
                <span>Analytics</span>
            </button>
            <button class="tab-btn" onclick="showPage('summary')">
                <i class="fas fa-tachometer-alt"></i>
                <span>Dashboard Summary</span>
            </button>
        </nav>

        <section id="running" class="active">
            <h3><i class="fas fa-running"></i> Train Running Status</h3>
            
            <div class="train-progress-info">
                <div class="train-info">
                    Train <strong>EXP101</strong> | Current Station: <strong id="current-station">Chennai Central</strong> | 
                    Next Station: <strong id="next-station">Villupuram</strong>
                </div>
                <div class="delay-info">
                    Delay: <strong id="current-delay">0</strong> min
                </div>
            </div>
            
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>
            
            <div class="train-map-container">
                <div class="stations-container" id="stations-container">
                    <div class="train-icon" id="train-icon">
                        <i class="fas fa-train"></i>
                    </div>
                    <!-- Stations will be added by JavaScript -->
                </div>
            </div>
            
            <!-- New Features: Weather and Passenger Info -->
            <div class="weather-info">
                <div class="weather-card">
                    <div class="weather-icon">
                        <i class="fas fa-cloud-sun"></i>
                    </div>
                    <div class="weather-details">
                        <h4>Current Weather</h4>
                        <div class="temp">28°C</div>
                    </div>
                </div>
                <div class="weather-card">
                    <div class="weather-icon">
                        <i class="fas fa-cloud-rain"></i>
                    </div>
                    <div class="weather-details">
                        <h4>Next Station Weather</h4>
                        <div class="temp">26°C</div>
                    </div>
                </div>
            </div>
            
            <div class="passenger-count">
                <div class="count-icon">
                    <i class="fas fa-users"></i>
                </div>
                <div class="count-details">
                    <h4>Passenger Count</h4>
                    <div class="number">342 / 480</div>
                </div>
            </div>
        </section>

        <section id="schedule">
            <h3><i class="fas fa-clock"></i> Train Schedule</h3>
            
            <div class="time-selector">
                <button class="time-btn active">Live</button>
                <button class="time-btn">Today</button>
                <button class="time-btn">Tomorrow</button>
                <button class="time-btn">Next 7 Days</button>
            </div>
            
            <table id="schedule-table">
                <thead>
                    <tr>
                        <th>Station</th>
                        <th>Arrival</th>
                        <th>Departure</th>
                        <th>Halt (min)</th>
                        <th>Platform</th>
                        <th>Status</th>
                        <th>Delay (min)</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </section>

        <section id="reroute">
            <h3><i class="fas fa-route"></i> Reroute Simulation</h3>
            
            <div class="simulation-controls">
                <button class="btn btn-primary" onclick="simulateReroute()">
                    <i class="fas fa-play"></i> Simulate Reroute
                </button>
                <button class="btn btn-outline" onclick="resetSimulation()">
                    <i class="fas fa-redo"></i> Reset
                </button>
                <button class="btn btn-outline" onclick="showAdvancedOptions()">
                    <i class="fas fa-cog"></i> Advanced Options
                </button>
            </div>
            
            <div class="route-comparison">
                <div class="route-card">
                    <h4><i class="fas fa-route"></i> Current Route</h4>
                    <div class="route-path">
                        Chennai Central → Villupuram → Tiruppattur → Jolarpettai → Salem → Erode → 
                        Dindigul → Madurai → Tirunelveli → Nagercoil → Kanyakumari
                    </div>
                    <div class="route-stats">
                        <div class="stat">
                            <div class="value" id="current-distance">480 km</div>
                            <div class="label">Distance</div>
                        </div>
                        <div class="stat">
                            <div class="value" id="current-time">7h 40m</div>
                            <div class="label">Duration</div>
                        </div>
                        <div class="stat">
                            <div class="value delay" id="current-delay-total">+5 min</div>
                            <div class="label">Total Delay</div>
                        </div>
                    </div>
                    <div class="energy-consumption">
                        <h4>Energy Consumption</h4>
                        <div class="consumption-bar">
                            <div class="consumption-fill" style="width: 85%"></div>
                        </div>
                        <div class="consumption-labels">
                            <span>Low</span>
                            <span>85%</span>
                            <span>High</span>
                        </div>
                    </div>
                </div>
                
                <div class="route-card recommended">
                    <h4><i class="fas fa-route"></i> Alternative Route</h4>
                    <div class="route-path">
                        Chennai Central → Salem → Madurai → Tirunelveli → Nagercoil → Kanyakumari
                    </div>
                    <div class="route-stats">
                        <div class="stat">
                            <div class="value" id="alt-distance">450 km</div>
                            <div class="label">Distance</div>
                        </div>
                        <div class="stat">
                            <div class="value" id="alt-time">7h 10m</div>
                            <div class="label">Duration</div>
                        </div>
                        <div class="stat">
                            <div class="value positive" id="alt-saving">-30 min</div>
                            <div class="label">Time Saving</div>
                        </div>
                    </div>
                    <div class="energy-consumption">
                        <h4>Energy Consumption</h4>
                        <div class="consumption-bar">
                            <div class="consumption-fill" style="width: 65%"></div>
                        </div>
                        <div class="consumption-labels">
                            <span>Low</span>
                            <span>65%</span>
                            <span>High</span>
                        </div>
                    </div>
                    <div class="action-buttons">
                        <button class="btn btn-primary">
                            <i class="fas fa-check"></i> Apply Reroute
                        </button>
                        <button class="btn btn-outline">
                            <i class="fas fa-info-circle"></i> Details
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- New Feature: Speed Gauge -->
            <div class="card" style="margin-top: 20px;">
                <h4>Current Speed</h4>
                <div class="speed-gauge">
                    <canvas id="speedGauge" width="150" height="150"></canvas>
                    <div class="gauge-value">80</div>
                </div>
                <div>km/h</div>
            </div>
        </section>

        <section id="analytics">
            <h3><i class="fas fa-chart-line"></i> Average Delay & Analytics</h3>
            <div class="card-container">
                <div class="card">
                    <h4>Average Delay</h4>
                    <div class="value delay" id="avg-delay">0 min</div>
                </div>
                <div class="card">
                    <h4>Max Delay</h4>
                    <div class="value delay" id="max-delay">0 min</div>
                </div>
                <div class="card">
                    <h4>On-time Performance</h4>
                    <div class="value positive" id="on-time">100%</div>
                </div>
                <div class="card">
                    <h4>Fuel Efficiency</h4>
                    <div class="value positive" id="fuel-efficiency">87%</div>
                </div>
            </div>
            <canvas id="delayChart" width="600" height="200"></canvas>
            
            <!-- New Feature: Platform View -->
            <h3 style="margin-top: 30px;"><i class="fas fa-th-list"></i> Platform Status</h3>
            <div class="platform-view">
                <div class="platform">
                    <div class="platform-number">Platform 1</div>
                    <div class="platform-status">Available</div>
                </div>
                <div class="platform">
                    <div class="platform-number">Platform 2</div>
                    <div class="platform-status occupied">Occupied (EXP102)</div>
                </div>
                <div class="platform">
                    <div class="platform-number">Platform 3</div>
                    <div class="platform-status">Available</div>
                </div>
            </div>
        </section>

        <section id="summary">
            <h3><i class="fas fa-tachometer-alt"></i> Dashboard Summary</h3>
            <div class="card-container">
                <div class="card">
                    <h4>Trains Running</h4>
                    <div class="value">1</div>
                </div>
                <div class="card">
                    <h4>Stations Covered</h4>
                    <div class="value">11</div>
                </div>
                <div class="card">
                    <h4>Next Delay Alert</h4>
                    <div class="value" id="next-alert">-</div>
                </div>
                <div class="card">
                    <h4>Overall Progress</h4>
                    <div class="value" id="overall-progress">0%</div>
                </div>
            </div>
            
            <div class="train-map-container" style="margin-top: 20px;">
                <h4 style="margin-top: 0;">Network Status</h4>
                <div style="display: flex; justify-content: space-between; flex-wrap: wrap;">
                    <div style="flex: 1; min-width: 200px;">
                        <div style="display: flex; align-items: center; margin-bottom: 10px;">
                            <div style="width: 12px; height: 12px; background: var(--accent); border-radius: 50%; margin-right: 10px;"></div>
                            <div>Normal Operation</div>
                        </div>
                        <div style="display: flex; align-items: center; margin-bottom: 10px;">
                            <div style="width: 12px; height: 12px; background: var(--warning); border-radius: 50%; margin-right: 10px;"></div>
                            <div>Minor Delays</div>
                        </div>
                        <div style="display: flex; align-items: center;">
                            <div style="width: 12px; height: 12px; background: var(--danger); border-radius: 50%; margin-right: 10px;"></div>
                            <div>Significant Delays</div>
                        </div>
                    </div>
                    <div style="flex: 1; min-width: 200px;">
                        <div style="background: rgba(0,0,0,0.2); padding: 10px; border-radius: 5px;">
                            <div style="font-weight: bold; margin-bottom: 5px;">System Health</div>
                            <div style="display: flex; align-items: center;">
                                <div style="flex: 1; height: 8px; background: #333; border-radius: 4px; overflow: hidden;">
                                    <div style="height: 100%; width: 95%; background: var(--accent);"></div>
                                </div>
                                <div style="margin-left: 10px; font-weight: bold; color: var(--accent);">95%</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- New Feature: Maintenance Status -->
            <h3 style="margin-top: 30px;"><i class="fas fa-tools"></i> Maintenance Status</h3>
            <div class="card-container">
                <div class="card">
                    <h4>Engine Health</h4>
                    <div class="value positive">92%</div>
                </div>
                <div class="card">
                    <h4>Brake System</h4>
                    <div class="value positive">88%</div>
                </div>
                <div class="card">
                    <h4>Next Service</h4>
                    <div class="value">12 days</div>
                </div>
            </div>
        </section>

        <!-- Notifications Panel -->
        <div class="notifications-panel" id="notifications-panel">
            <h3>
                Notifications
                <span style="cursor: pointer;" onclick="toggleNotifications()"><i class="fas fa-times"></i></span>
            </h3>
            <div class="notification-item">
                <strong>Train Departure</strong>
                <p>Train EXP101 has departed from Chennai Central</p>
                <small>2 minutes ago</small>
            </div>
            <div class="notification-item warning">
                <strong>Minor Delay</strong>
                <p>Expected 3 min delay at Villupuram station</p>
                <small>5 minutes ago</small>
            </div>
            <div class="notification-item alert">
                <strong>Weather Alert</strong>
                <p>Heavy rain expected near Salem</p>
                <small>10 minutes ago</small>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        function showPage(pageId){
            document.querySelectorAll('section').forEach(s=>s.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');
            document.querySelectorAll('nav button').forEach(b=>b.classList.remove('active'));
            document.querySelector(`button[onclick="showPage('${pageId}')"]`).classList.add('active');
            
            // Update charts when analytics tab is opened
            if (pageId === 'analytics') {
                renderAnalytics();
            }
        }
        
        function toggleNotifications() {
            document.getElementById('notifications-panel').classList.toggle('open');
        }
        
        function simulateReroute() {
            document.getElementById('current-delay-total').textContent = `+${Math.floor(Math.random() * 10) + 3} min`;
            document.getElementById('alt-saving').textContent = `-${Math.floor(Math.random() * 30) + 15} min`;
            document.getElementById('alt-saving').className = 'value positive';
            
            // Show notification
            addNotification("Reroute simulated", "Alternative route shows potential time savings", "info");
        }
        
        function resetSimulation() {
            document.getElementById('current-delay-total').textContent = '+5 min';
            document.getElementById('alt-saving').textContent = '-30 min';
            
            // Show notification
            addNotification("Simulation reset", "Reroute simulation has been reset", "info");
        }
        
        function showAdvancedOptions() {
            alert("Advanced rerouting options would appear here. This could include:\n\n- Weather considerations\n- Track maintenance status\n- Passenger load factors\n- Fuel efficiency calculations");
        }
        
        function addNotification(title, message, type = "info") {
            // In a real application, this would add to the notifications list
            console.log(`Notification: ${title} - ${message}`);
        }
        
        function updateCurrentTime() {
            const now = new Date();
            document.getElementById('current-time').textContent = now.toLocaleTimeString();
        }

        const stations = ["Chennai Central","Villupuram","Tiruppattur","Jolarpettai","Salem","Erode","Dindigul","Madurai","Tirunelveli","Nagercoil","Kanyakumari"];
        let train = { 
            id:"EXP101", 
            currentIndex:0, 
            delays:Array(stations.length).fill(0),
            position: 0
        };
        
        const scheduleTimes = ["08:00","09:30","10:30","11:20","12:40","13:40","15:00","16:00","17:30","18:30","19:40"];
        const haltTimes = [5,2,3,2,3,4,2,3,2,3,5];
        const platforms = ["1", "2", "3", "1", "2", "1", "2", "3", "2", "1", "1"];
        
        // Initialize the stations on the map
        function initStations() {
            const container = document.getElementById('stations-container');
            container.innerHTML = ''; // Clear existing stations
            
            // Add train icon
            const trainIcon = document.createElement('div');
            trainIcon.className = 'train-icon';
            trainIcon.id = 'train-icon';
            trainIcon.innerHTML = '<i class="fas fa-train"></i>';
            container.appendChild(trainIcon);
            
            // Add stations
            stations.forEach((station, index) => {
                const stationEl = document.createElement('div');
                stationEl.className = 'station';
                stationEl.id = `station-${index}`;
                
                const dotEl = document.createElement('div');
                dotEl.className = 'station-dot';
                
                const nameEl = document.createElement('div');
                nameEl.className = 'station-name';
                nameEl.textContent = station.split(' ')[0];
                
                stationEl.appendChild(dotEl);
                stationEl.appendChild(nameEl);
                container.appendChild(stationEl);
            });
            
            updateStations();
        }
        
        // Update station statuses
        function updateStations() {
            stations.forEach((station, index) => {
                const stationEl = document.getElementById(`station-${index}`);
                stationEl.classList.remove('passed', 'current');
                
                if (index < train.currentIndex) {
                    stationEl.classList.add('passed');
                } else if (index === train.currentIndex) {
                    stationEl.classList.add('current');
                }
            });
        }
        
        // Update train position
        function updateTrainPosition() {
            const progress = (train.currentIndex / (stations.length - 1)) * 100;
            const progressFill = document.getElementById('progress-fill');
            progressFill.style.width = `${progress}%`;
            
            const trainIcon = document.getElementById('train-icon');
            trainIcon.style.left = `${progress}%`;
            
            document.getElementById('overall-progress').textContent = `${Math.round(progress)}%`;
            document.getElementById('current-station').textContent = stations[train.currentIndex];
            document.getElementById('next-station').textContent = 
                train.currentIndex < stations.length - 1 ? stations[train.currentIndex + 1] : 'End of Line';
            document.getElementById('current-delay').textContent = train.delays[train.currentIndex];
        }
        
        function renderSchedule(){
            const tbody = document.querySelector('#schedule-table tbody');
            tbody.innerHTML='';
            stations.forEach((st,i)=>{
                let status='Waiting';
                let statusClass = 'status-waiting';
                if(i<train.currentIndex) {
                    status='Departed';
                    statusClass = 'status-departed';
                }
                else if(i===train.currentIndex) {
                    status='Running';
                    statusClass = 'status-running';
                }
                
                const tr = document.createElement('tr');
                tr.innerHTML=`<td>${st}</td><td>${scheduleTimes[i] || '-'}</td><td>${scheduleTimes[i] || '-'}</td><td>${haltTimes[i] || 0}</td><td>${platforms[i] || '-'}</td><td class="${statusClass}">${status}</td><td>${train.delays[i]} min</td>`;
                tbody.appendChild(tr);
            });
        }

        const ctx = document.getElementById('delayChart').getContext('2d');
        const delayChart = new Chart(ctx, {
            type:'bar',
            data:{ 
                labels:stations, 
                datasets:[{ 
                    label:'Delay (min)', 
                    data:train.delays, 
                    backgroundColor: function(context) {
                        const value = context.dataset.data[context.dataIndex];
                        return value > 2 ? '#f44336' : (value > 0 ? '#ff9800' : '#4caf50');
                    }
                }]
            },
            options:{ 
                responsive: true,
                scales:{ 
                    y:{
                        beginAtZero:true,
                        ticks: {
                            callback: function(value) {
                                return value + ' min';
                            }
                        }
                    } 
                } 
            }
        });
        
        // Speed gauge chart
        const speedGauge = new Chart(document.getElementById('speedGauge'), {
            type: 'doughnut',
            data: {
                datasets: [{
                    data: [80, 20],
                    backgroundColor: ['#4caf50', '#eeeeee'],
                    borderWidth: 0
                }]
            },
            options: {
                cutout: '70%',
                rotation: -90,
                circumference: 180,
                plugins: {
                    legend: {
                        display: false
                    },
                    tooltip: {
                        enabled: false
                    }
                }
            }
        });

        function renderAnalytics(){
            delayChart.data.datasets[0].data = train.delays;
            delayChart.update();
            
            const avgDelay = Math.round(train.delays.reduce((a,b)=>a+b,0)/stations.length);
            document.getElementById('avg-delay').textContent = avgDelay + ' min';
            
            const maxDelay = Math.max(...train.delays);
            document.getElementById('max-delay').textContent = maxDelay + ' min';
            
            const onTimePercentage = Math.round((train.delays.filter(d => d === 0).length / stations.length) * 100);
            document.getElementById('on-time').textContent = onTimePercentage + '%';
            
            const nextAlertIndex = train.delays.findIndex(d=>d>2);
            document.getElementById('next-alert').textContent = nextAlertIndex>=0 ? 
                `${stations[nextAlertIndex]} +${train.delays[nextAlertIndex]} min` : 'No alerts';
        }
        
        function simulateMovement(){
            if(train.currentIndex<stations.length-1){
                train.currentIndex++;
                train.delays[train.currentIndex] = Math.floor(Math.random()*4); // Random delay 0-3 min
                updateStations();
                updateTrainPosition();
                renderSchedule(); 
                renderAnalytics();
                
                // Randomly update speed
                const newSpeed = Math.floor(Math.random() * 40) + 60;
                speedGauge.data.datasets[0].data = [newSpeed, 100-newSpeed];
                speedGauge.update();
                document.querySelector('.gauge-value').textContent = newSpeed;
            }
        }

        // Initialize the dashboard
        initStations();
        updateTrainPosition();
        renderSchedule(); 
        renderAnalytics();
        updateCurrentTime();
        
        // Update time every second
        setInterval(updateCurrentTime, 1000);
        
        // Set up the simulation interval
        setInterval(simulateMovement, 5000);
    </script>
</body>
</html>